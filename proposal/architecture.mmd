flowchart LR
  %% Simplified Data Flow for Furo API Marketplace
  %% Orientation Left->Right to reduce crossings

  subgraph UserLayer[User]
    User[(User)]
    Wallet[(Wallet)]
    User --> Wallet
  end

  subgraph AppShell[App Shell]
    RootLayout["RootLayout\n(app/layout.tsx)"]
    Providers["Providers\n(Wagmi + RainbowKit + React Query)"]
    Theme["Theme Tokens\n(globals.css)"]
    RootLayout --> Providers
    RootLayout --> Theme
  end

  subgraph Pages[Pages]
    Landing[Landing]
    Marketplace[Marketplace]
    API[API Details]
    ListAPI[List API Form]
    Dashboard[Dashboard]
  end

  subgraph Data[Client Data]
    MockAPIs[(mockAPIs)]
    Favorites[(Favorites Set)]
  end

  subgraph Future[Future Payment]
    Payment[(x402 Payment Flow)]
    ExternalAPI[(External Endpoint)]
  end

  %% High level flows
  User --> RootLayout
  Wallet --> Providers
  Providers --> Pages
  RootLayout --> Pages

  %% Data usage
  MockAPIs --> Marketplace
  MockAPIs --> API
  MockAPIs --> Dashboard
  Marketplace --> Favorites
  ListAPI --> MockAPIs
  Dashboard --> MockAPIs

  %% Payment path (only API page)
  API --> Payment --> ExternalAPI --> API

  %% Styling future nodes
  classDef future fill:#333,stroke:#777,stroke-dasharray:5 5,color:#fff
  class Payment,ExternalAPI future
